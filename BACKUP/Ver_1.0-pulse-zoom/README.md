# Logic Analyzer - Version 1.0-pulse-zoom

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-13
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** STM32F401CCU6 (BlackPill)
**–î–∏—Å–ø–ª–µ–π:** SH1106 OLED 128x64 (I2C)

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏

–≠—Ç–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

#### 1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞**
- 4-–∫–∞–Ω–∞–ª—å–Ω—ã–π –¥–∏—Å–ø–ª–µ–π
- –ö–∞–Ω–∞–ª—ã —Å –º–µ—Ç–∫–∞–º–∏: 0, 1, 2, 3
- –°–∏–≥–Ω–∞–ª—ã —Å —Ñ–∞–∑–æ–≤—ã–º —Å–¥–≤–∏–≥–æ–º –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏
- –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ —Å 50% —è—Ä–∫–æ—Å—Ç—å—é (—Ç–æ—á–µ—á–Ω–∞—è –ª–∏–Ω–∏—è) –Ω–∞ 1 –ø–∏–∫—Å–µ–ª—å –≤—ã—à–µ LOW —É—Ä–æ–≤–Ω—è
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: bit 7 = —É—Ä–æ–≤–µ–Ω—å (0/1), bits 6-0 = –≤—Ä–µ–º—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö

#### 2. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ (Scroll)**
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –í—Ä–∞—â–µ–Ω–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ
- **–ü–æ —á–∞—Å–æ–≤–æ–π** ‚Üí –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ø—Ä–∞–≤–æ (–ø–æ–∫–∞–∑ –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–∞)
- **–ü—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π** ‚Üí –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ª–µ–≤–æ (–ø–æ–∫–∞–∑ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–∞)
- **–®–∞–≥ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏:** 4 –ø–∏–∫—Å–µ–ª—è –Ω–∞ –∫–ª–∏–∫ —ç–Ω–∫–æ–¥–µ—Ä–∞
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ [0, max_scroll]
- **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:** ~480 –ø–∏–∫—Å–µ–ª–µ–π (4 —ç–∫—Ä–∞–Ω–∞)

#### 3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (Zoom)**
- **–í—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º:** –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞ (>500ms)
- **–í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞:** –õ—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ —ç–Ω–∫–æ–¥–µ—Ä–∞
- **–£—Ä–æ–≤–Ω–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
  - 0.5x - —Å–∂–∞—Ç–∏–µ (–±–æ–ª—å—à–µ –æ–±–∑–æ—Ä)
  - 1.0x - –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - 2.0x - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ 2x
  - 4.0x - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ 4x
  - 8.0x - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ zoom:**
  - **–ü–æ —á–∞—Å–æ–≤–æ–π** ‚Üí zoom in (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ)
  - **–ü—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π** ‚Üí zoom out (—É–º–µ–Ω—å—à–µ–Ω–∏–µ)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç:** max_scroll –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–∞—Å—à—Ç–∞–±–∞

#### 4. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞**
- **–í –≤–µ—Ä—Ö–Ω–µ–º –ª–µ–≤–æ–º —É–≥–ª—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:**
  - `NORM` - –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (–ø—Ä–æ–∫—Ä—É—Ç–∫–∞)
  - `Z:1.0x`, `Z:2.0x`, `Z:4.0x`, `Z:8.0x`, `Z:0.5x` - —Ä–µ–∂–∏–º zoom —Å —Ç–µ–∫—É—â–∏–º —É—Ä–æ–≤–Ω–µ–º

#### 5. **Screen Saver (–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ)**
- **–¢–∞–π–º–∞—É—Ç:** 2 –º–∏–Ω—É—Ç—ã (120 —Å–µ–∫—É–Ω–¥) –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è (OLED OFF)
- **–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ:**
  - –í—Ä–∞—â–µ–Ω–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞
  - –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ —ç–Ω–∫–æ–¥–µ—Ä–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–∏—Å–ø–ª–µ–π –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

#### 6. **–°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ë–∞–Ω–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ USB CDC
- –¢–∞–π–º–∞—É—Ç –±–∞–Ω–Ω–µ—Ä–∞: 3 —Å–µ–∫—É–Ω–¥—ã (–∏–ª–∏ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –Ω–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏

---

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –≠–Ω–∫–æ–¥–µ—Ä (Rotary Encoder)

| –î–µ–π—Å—Ç–≤–∏–µ | –†–µ–∂–∏–º | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-------|-----------|
| **–í—Ä–∞—â–µ–Ω–∏–µ CW** | NORM | –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ø—Ä–∞–≤–æ (4 px/–∫–ª–∏–∫) |
| **–í—Ä–∞—â–µ–Ω–∏–µ CCW** | NORM | –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ª–µ–≤–æ (4 px/–∫–ª–∏–∫) |
| **–î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ** | NORM | –í—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º ZOOM |
| **–í—Ä–∞—â–µ–Ω–∏–µ CW** | ZOOM | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ (zoom in) |
| **–í—Ä–∞—â–µ–Ω–∏–µ CCW** | ZOOM | –£–º–µ–Ω—å—à–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ (zoom out) |
| **–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ** | ZOOM | –í—ã—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º NORM |
| **–õ—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ** | Screen Saver | –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è |

### –¢–∞–π–º–∏–Ω–≥–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ | > 500 ms |
| –¢–∞–π–º–∞—É—Ç –±–∞–Ω–Ω–µ—Ä–∞ | 3 —Å–µ–∫—É–Ω–¥—ã |
| –¢–∞–π–º–∞—É—Ç LA —Å—Ç–∞—Ä—Ç–∞ | 3 —Å–µ–∫—É–Ω–¥—ã |
| Screen saver | 120 —Å–µ–∫—É–Ω–¥ (2 –º–∏–Ω—É—Ç—ã) |

---

## üíæ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

```
Memory region         Used Size  Region Size  %age Used
         RAM:       27096 B        64 KB     41.35%
       FLASH:       64616 B       256 KB     24.65%
```

### –†–∞–∑–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏

```
   text     data      bss      dec      hex    filename
  64236      368    26736    91340    164cc   encoder-only.elf
```

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **MCU:** STM32F401CCU6 (ARM Cortex-M4F @ 84 MHz)
- **Flash:** 256 KB
- **RAM:** 64 KB
- **Display:** SH1106 OLED 128x64, I2C @ 400 kHz
- **Encoder:** Rotary encoder —Å –∫–Ω–æ–ø–∫–æ–π, EXTI interrupts
- **Debug:** USB CDC (Virtual COM Port)
- **RTOS:** FreeRTOS (CMSIS-RTOS v2)

### –ó–∞–¥–∞—á–∏ FreeRTOS

| –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | Stack | –ü–µ—Ä–∏–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|-------|--------|----------|
| `ledTask` | Normal | 128 words | 500 ms | Heartbeat LED (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç—ã) |
| `testTask` | Normal | 512 words | 10 ms | –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–Ω–∫–æ–¥–µ—Ä–∞, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ LA |

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã (–≤–∫–ª—é—á–µ–Ω—ã –≤ backup)

```
Core/
‚îú‚îÄ‚îÄ Lib/
‚îÇ   ‚îú‚îÄ‚îÄ Encoder.cpp          # –ö–ª–∞—Å—Å —ç–Ω–∫–æ–¥–µ—Ä–∞ —Å debounce –∏ long press
‚îÇ   ‚îú‚îÄ‚îÄ Encoder.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Led.cpp              # –ö–ª–∞—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è LED
‚îÇ   ‚îú‚îÄ‚îÄ Led.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Oled.cpp             # C++ wrapper –¥–ª—è SH1106 —Å LA —Ñ—É–Ω–∫—Ü–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Oled.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Tasks.cpp            # FreeRTOS –∑–∞–¥–∞—á–∏ (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îî‚îÄ‚îÄ Tasks.h
‚îú‚îÄ‚îÄ Inc/
‚îÇ   ‚îú‚îÄ‚îÄ sh1106.h             # –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –¥—Ä–∞–π–≤–µ—Ä SH1106
‚îÇ   ‚îî‚îÄ‚îÄ ... (–¥—Ä—É–≥–∏–µ HAL –∑–∞–≥–æ–ª–æ–≤–∫–∏)
‚îî‚îÄ‚îÄ Src/
    ‚îú‚îÄ‚îÄ main.cpp             # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
    ‚îú‚îÄ‚îÄ sh1106.c             # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ SH1106
    ‚îî‚îÄ‚îÄ ... (–¥—Ä—É–≥–∏–µ HAL —Ñ–∞–π–ª—ã)
```

### –ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (–≥–æ—Ç–æ–≤—ã–µ –∫ –ø—Ä–æ—à–∏–≤–∫–µ)

```
build/
‚îú‚îÄ‚îÄ encoder-only.elf         # ELF —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
‚îú‚îÄ‚îÄ encoder-only.bin         # Raw binary –¥–ª—è ST-Link/DFU
‚îî‚îÄ‚îÄ encoder-only.hex         # Intel HEX –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–æ–≤
```

---

## üîß –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–¥–µ

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞

```cpp
// –ö–∞–∂–¥—ã–π –±–∞–π—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
// - Bit 7: –£—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞ (0 = LOW, 1 = HIGH)
// - Bits 6-0: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –ø–∏–∫—Å–µ–ª—è—Ö (0-127)

const uint8_t logic_ch0_data[] = {
    0x80, 0x14,  // Start LOW –¥–ª—è 20 –ø–∏–∫—Å–µ–ª–µ–π
    0x88, 0x1E,  // –ü–µ—Ä–µ—Ö–æ–¥ HIGH –Ω–∞ 30 –ø–∏–∫—Å–µ–ª–µ–π
    0x08, 0x0A,  // –ü–µ—Ä–µ—Ö–æ–¥ LOW –Ω–∞ 10 –ø–∏–∫—Å–µ–ª–µ–π
    // ...
};
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏

```cpp
// Core/Lib/Oled.hpp

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ —Å zoom –∏ scroll
void drawLogicSignal(uint8_t x, uint8_t y, const uint8_t* signal_data,
                    uint16_t data_length, uint8_t height,
                    uint16_t x_offset = 0,
                    float zoom_factor = 1.0f,
                    uint8_t color = 1);

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤
void drawLogicChannels(const uint8_t** channel_data,
                      const uint16_t* data_lengths,
                      uint8_t num_channels,
                      uint8_t start_y = 0,
                      uint8_t channel_height = 16,
                      uint16_t x_offset = 0,
                      float zoom_factor = 1.0f,
                      uint8_t color = 1);
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (Tasks.cpp)

```cpp
static uint16_t scroll_offset = 0;        // –ü–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ [0..max_scroll]
static float zoom_level = 1.0f;           // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å zoom
static uint8_t current_zoom_index = 1;    // –ò–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ zoom_levels[]
static bool zoom_mode = false;            // –§–ª–∞–≥ —Ä–µ–∂–∏–º–∞ zoom
static bool display_is_on = true;         // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è (screen saver)
static uint32_t last_activity_time = 0;   // Timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

---

## üîÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é

### –ú–µ—Ç–æ–¥ 1: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ —Å –ø–æ–ª–Ω–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
cd /home/victor/STM/PROJECTS/VSCODE/encoder-only

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
mkdir -p BACKUP/current_backup
cp -r Core/Lib Core/Inc Core/Src BACKUP/current_backup/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é 1.0-pulse-zoom
cp -r BACKUP/Ver_1.0-pulse-zoom/Core/Lib/* Core/Lib/
cp -r BACKUP/Ver_1.0-pulse-zoom/Core/Inc/* Core/Inc/
cp -r BACKUP/Ver_1.0-pulse-zoom/Core/Src/* Core/Src/

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
ninja -C build
```

### –ú–µ—Ç–æ–¥ 2: –ü—Ä—è–º–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é –±–µ–∑ —Å–±–æ—Ä–∫–∏:

#### –ß–µ—Ä–µ–∑ ST-Link (DFU/SWD):

```bash
# –° –ø–æ–º–æ—â—å—é st-flash
st-flash write BACKUP/Ver_1.0-pulse-zoom/build/encoder-only.bin 0x8000000

# –ò–ª–∏ —á–µ—Ä–µ–∑ STM32CubeProgrammer (GUI)
# File ‚Üí Open ‚Üí encoder-only.hex
# Target ‚Üí Program & Verify
```

#### –ß–µ—Ä–µ–∑ OpenOCD:

```bash
openocd -f interface/stlink.cfg -f target/stm32f4x.cfg \
  -c "program BACKUP/Ver_1.0-pulse-zoom/build/encoder-only.elf verify reset exit"
```

### –ú–µ—Ç–æ–¥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CMake –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞

```bash
cd /home/victor/STM/PROJECTS/VSCODE/encoder-only

# –û—á–∏—Å—Ç–∏—Ç—å build
rm -rf build
mkdir build

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏
cp -r BACKUP/Ver_1.0-pulse-zoom/Core/Lib/* Core/Lib/
cp -r BACKUP/Ver_1.0-pulse-zoom/Core/Inc/* Core/Inc/
cp -r BACKUP/Ver_1.0-pulse-zoom/Core/Src/* Core/Src/

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å build system
cmake -B build -G Ninja

# –°–æ–±—Ä–∞—Ç—å
ninja -C build

# –ü—Ä–æ—à–∏—Ç—å
st-flash write build/encoder-only.bin 0x8000000
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### 1. –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –î–∏—Å–ø–ª–µ–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–Ω–Ω–µ—Ä
- [ ] –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
- [ ] –í–∏–¥–Ω—ã 4 –∫–∞–Ω–∞–ª–∞ —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ (0, 1, 2, 3)
- [ ] –°–∏–≥–Ω–∞–ª—ã –∏–º–µ—é—Ç —Ñ–∞–∑–æ–≤—ã–π —Å–¥–≤–∏–≥

### 2. –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ (NORM —Ä–µ–∂–∏–º)
- [ ] –í—Ä–∞—â–µ–Ω–∏–µ CW –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –≤–ø—Ä–∞–≤–æ
- [ ] –í—Ä–∞—â–µ–Ω–∏–µ CCW –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –≤–ª–µ–≤–æ
- [ ] –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö
- [ ] –í –≤–µ—Ä—Ö–Ω–µ–º –ª–µ–≤–æ–º —É–≥–ª—É –ø–æ–∫–∞–∑–∞–Ω–æ "NORM"

### 3. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (ZOOM —Ä–µ–∂–∏–º)
- [ ] –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º ZOOM
- [ ] –í —É–≥–ª—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "Z:1.0x"
- [ ] –í—Ä–∞—â–µ–Ω–∏–µ CW —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–± (–¥–æ Z:8.0x)
- [ ] –í—Ä–∞—â–µ–Ω–∏–µ CCW —É–º–µ–Ω—å—à–∞–µ—Ç –º–∞—Å—à—Ç–∞–± (–¥–æ Z:0.5x)
- [ ] –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ —Ä–µ–∂–∏–º NORM

### 4. Screen Saver
- [ ] –î–∏—Å–ø–ª–µ–π –≥–∞—Å–Ω–µ—Ç —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
- [ ] –õ—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å —ç–Ω–∫–æ–¥–µ—Ä–æ–º –≤–∫–ª—é—á–∞–µ—Ç –¥–∏—Å–ø–ª–µ–π
- [ ] –ü–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### 5. USB CDC –ª–æ–≥
- [ ] –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Ç–µ—Ä–º–∏–Ω–∞–ª—É –≤–∏–¥–µ–Ω –±–∞–Ω–Ω–µ—Ä
- [ ] –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—è —ç–Ω–∫–æ–¥–µ—Ä–∞
- [ ] –õ–æ–≥–∏—Ä—É—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è zoom/scroll/screen saver

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Version 1.0-pulse-zoom (2025-10-13)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ 4-–∫–∞–Ω–∞–ª—å–Ω—ã–π –¥–∏—Å–ø–ª–µ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å –∑–∞—â–∏—Ç–æ–π –≥—Ä–∞–Ω–∏—Ü
- ‚úÖ 5 —É—Ä–æ–≤–Ω–µ–π –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (0.5x - 8.0x)
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ (NORM/ZOOM)
- ‚úÖ Screen saver —Å 2-–º–∏–Ω—É—Ç–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è
- ‚úÖ –°–µ—Ç–∫–∞ —Å 50% —è—Ä–∫–æ—Å—Ç—å—é (—Ç–æ—á–µ—á–Ω–∞—è –ª–∏–Ω–∏—è)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∏—Å–ø–ª–µ—è (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:**
- –£–±—Ä–∞–Ω–æ –º–µ—Ä—Ü–∞–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è (—Ñ–ª–∞–≥ display_needs_update)
- –£–¥–∞–ª–µ–Ω—ã –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ HAL_Delay
- –î–æ–±–∞–≤–ª–µ–Ω float –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç max_scroll –ø—Ä–∏ zoom

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- –†–∞–±–æ—Ç–∞ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ —ç–Ω–∫–æ–¥–µ—Ä–∞
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ NORM ‚Üî ZOOM
- –ì—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- Screen saver –∏ wake-up

---

## üÜò –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∏—Å–ø–ª–µ–π –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å I2C –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ SH1106 (–∞–¥—Ä–µ—Å 0x3C, SCL/SDA)

### –ü—Ä–æ–±–ª–µ–º–∞: –≠–Ω–∫–æ–¥–µ—Ä –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å EXTI –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –Ω–∞ –ø–∏–Ω–∞—Ö —ç–Ω–∫–æ–¥–µ—Ä–∞ (A, B, SW)

### –ü—Ä–æ–±–ª–µ–º–∞: Screen saver –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–æ—à–ª–æ >2 –º–∏–Ω—É—Ç—ã –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ LA

### –ü—Ä–æ–±–ª–µ–º–∞: Zoom –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –¥–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ >500ms, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥ zoom_mode

---

## üë§ –ê–≤—Ç–æ—Ä –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** Claude Code (Anthropic) + Victor
**–î–∞—Ç–∞:** 2025-10-13
**–ü—Ä–æ–µ–∫—Ç:** Logic Analyzer –¥–ª—è STM32F401CCU6
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Open source (–¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π)

---

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –≠—Ç–∞ –≤–µ—Ä—Å–∏—è —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –±–∞–∑—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- –í—Å–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-13
